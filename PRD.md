# PRD - 产品需求文档

## 产品名称
闲鱼商品数据分析平台

## 一、产品概述

### 1.1 产品定位
基于阿里开放平台闲鱼 API 的智能化数据分析工具，为闲鱼卖家提供价格监控、智能定价、竞品分析等服务。

### 1.2 产品目标
- 帮助商家通过数据分析优化定价策略
- 提升商品成交率和经营效率
- 降低市场调研成本

### 1.3 目标用户
- 闲鱼个人卖家
- 闲鱼小店商家
- 二手商品经营者

## 二、技术架构

### 2.1 技术栈
- **前端框架**: Next.js 16 (App Router)
- **UI 库**: React 19 + shadcn/ui
- **样式方案**: Tailwind CSS 4
- **开发语言**: TypeScript 5
- **部署平台**: Vercel
- **数据源**: 阿里开放平台闲鱼 API

### 2.2 系统架构
```
用户浏览器
    ↓
Next.js 前端应用 (Vercel)
    ↓
API Gateway
    ↓
阿里开放平台 API
```

### 2.3 数据流程
1. 用户在前端发起数据请求
2. Next.js API Route 调用阿里开放平台 API
3. 数据返回后进行清洗和计算
4. 前端展示分析结果

## 三、功能模块

### 3.1 用户管理模块

#### 3.1.1 用户注册
**功能描述**: 新用户注册账户
**输入字段**:
- 用户名（必填，3-20字符）
- 手机号（必填，需验证）
- 密码（必填，6-20字符）
- 验证码（必填）

**输出**: 注册成功后自动登录

#### 3.1.2 用户登录
**功能描述**: 用户使用用户名/手机号和密码登录
**输入字段**:
- 账号（用户名或手机号）
- 密码

**输出**: 登录成功，跳转到首页

#### 3.1.3 账户信息管理
**功能描述**: 用户查看和修改个人信息
**功能点**:
- 修改昵称
- 修改手机号
- 修改密码
- 查看账户权限

### 3.2 商品监控模块

#### 3.2.1 商品搜索
**功能描述**: 根据关键词搜索闲鱼商品
**输入**:
- 关键词
- 价格范围
- 类目筛选
- 排序方式

**输出**: 商品列表（包含价格、卖家、图片等信息）

**使用 API**:
- `taobao.idle.item.search` - 商品搜索接口

#### 3.2.2 商品收藏
**功能描述**: 收藏感兴趣的商品进行监控
**操作**: 点击收藏按钮，将商品加入收藏列表

#### 3.2.3 价格变动提醒
**功能描述**: 收藏商品价格变动时，发送提醒
**提醒方式**: 站内消息 + 可选邮件/短信通知

### 3.3 数据分析模块

#### 3.3.1 价格走势图
**功能描述**: 展示商品历史价格变化趋势
**实现方式**: 使用图表库（如 Recharts）绘制折线图

**使用 API**:
- `taobao.idle.item.info` - 获取商品详情及历史数据

#### 3.3.2 同类商品对比
**功能描述**: 对比同类商品的价格、销量、评价等数据
**展示形式**: 表格 + 图表

#### 3.3.3 成交量统计
**功能描述**: 统计某类商品的成交量和成交率
**展示形式**: 柱状图/饼图

### 3.4 智能定价模块

#### 3.4.1 定价建议
**功能描述**: 基于数据为用户提供定价建议
**算法逻辑**:
- 分析同类商品价格分布
- 考虑商品成色、品牌、配置等因素
- 结合历史成交数据

**输出**:
- 推荐价格区间
- 定价理由说明
- 预期成交率

#### 3.4.2 竞品分析
**功能描述**: 分析竞争对手的销售策略
**分析维度**:
- 价格策略
- 商品描述质量
- 图片质量
- 用户评价
- 响应速度

**使用 API**:
- `taobao.idle.item.info` - 商品详情
- `taobao.idle.user.info` - 卖家信息

### 3.5 数据导出模块

#### 3.5.1 导出分析报告
**功能描述**: 将数据分析结果导出为 PDF/Excel
**导出内容**:
- 商品价格走势
- 市场分析数据
- 定价建议

## 四、API 使用计划

### 4.1 需申请的 API 接口

| 接口名称 | 接口说明 | 使用场景 | 预估调用频率 |
|---------|---------|---------|-------------|
| 商品搜索 | taobao.idle.item.search | 商品搜索、数据采集 | 1000次/天 |
| 商品详情 | taobao.idle.item.info | 获取商品详细信息、历史数据 | 500次/天 |
| 卖家信息 | taobao.idle.user.info | 获取卖家信用等级、评价 | 300次/天 |
| 交易数据 | taobao.idle.trade.data | 获取历史成交记录 | 200次/天 |

### 4.2 API 调用方式

**认证方式**: OAuth 2.0

**请求示例**:
```typescript
// Next.js API Route
import axios from 'axios';

export async function POST(request: Request) {
  const { keyword } = await request.json();

  const response = await axios.post(
    'https://eco.taobao.com/router/rest',
    {
      method: 'taobao.idle.item.search',
      app_key: process.env.TAOBAO_APP_KEY,
      session: process.env.TAOBAO_SESSION_KEY,
      timestamp: Date.now(),
      v: '2.0',
      format: 'json',
      q: keyword,
    },
    {
      headers: {
        'Content-Type': 'application/json',
      },
    }
  );

  return Response.json(response.data);
}
```

### 4.3 数据缓存策略
- 搜索结果缓存 1 小时
- 商品详情缓存 30 分钟
- 使用 Redis/内存缓存提高响应速度

## 五、界面设计

### 5.1 整体风格
- 简洁、现代、专业
- 使用橙色作为主色调（与闲鱼品牌色呼应）
- 支持深色模式

### 5.2 主要页面

#### 5.2.1 首页
- 项目介绍
- 核心功能展示
- 登录入口

#### 5.2.2 登录/注册页
- 用户名/手机号输入
- 密码输入
- 登录按钮

#### 5.2.3 仪表盘
- 数据概览卡片
- 价格走势图表
- 快捷操作入口

#### 5.2.4 商品搜索页
- 搜索框和筛选器
- 商品列表
- 收藏按钮

#### 5.2.5 商品详情页
- 商品基本信息
- 价格走势图
- 同类商品对比
- 定价建议

## 六、数据安全

### 6.1 用户数据保护
- 密码使用 bcrypt 加存储
- 敏感信息传输使用 HTTPS
- 用户数据隔离存储

### 6.2 API 调用安全
- API Key 存储在环境变量中
- 实现请求频率限制
- 遵守阿里开放平台 API 调用规范

### 6.3 数据使用规范
- 仅用于用户授权的数据分析
- 不存储或传播用户的个人隐私信息
- 遵守相关法律法规

## 七、开发计划

### Phase 1: 基础框架（已完成 ✅）
- [x] 项目初始化
- [x] 首页开发
- [x] 登录页面 UI
- [x] 部署到 Vercel

### Phase 2: API 集成（待审核通过后）
- [ ] 申请阿里开放平台 API
- [ ] 实现商品搜索功能
- [ ] 实现商品详情获取
- [ ] 实现用户认证系统

### Phase 3: 核心功能开发
- [ ] 价格监控功能
- [ ] 数据可视化
- [ ] 智能定价算法
- [ ] 竞品分析

### Phase 4: 优化上线
- [ ] 性能优化
- [ ] 用户测试
- [ ] 正式上线

## 八、成功指标

### 8.1 产品指标
- 注册用户数
- 日活跃用户数
- 平均使用时长
- 用户留存率

### 8.2 技术指标
- API 调用成功率 > 99%
- 页面加载时间 < 2秒
- 系统可用性 > 99.9%

## 九、风险与应对

### 9.1 技术风险
- API 限流: 实现请求队列和缓存
- 数据异常: 做好异常处理和容错机制

### 9.2 业务风险
- 用户增长缓慢: 加强推广和优化用户体验
- 平台政策变化: 保持与平台的沟通，及时调整

## 十、附录

### 10.1 参考资料
- [阿里开放平台文档](https://open.taobao.com/doc.htm)
- [Next.js 官方文档](https://nextjs.org/docs)
- [shadcn/ui 组件库](https://ui.shadcn.com/)

### 10.2 版本历史
- v1.0 - 2025.01 - 初始版本
